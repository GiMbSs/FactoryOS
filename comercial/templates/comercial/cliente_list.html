{% extends "base.html" %}

{% block title %}Lista de Clientes{% endblock %}

{% block breadcrumbs %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb bg-white px-2 py-2 mb-4 rounded-3 shadow-sm">
    <li class="breadcrumb-item"><a href="{% url 'index' %}">Dashboard</a></li>
    <li class="breadcrumb-item active" aria-current="page">Clientes</li>
  </ol>
</nav>
{% endblock %}
{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">Lista de Clientes</h2>
        <a href="{% url 'comercial:cadastro_cliente' %}" class="btn btn-success">
            <i class="bi bi-person-plus"></i> Novo Cliente
        </a>
    </div>
    <div>
        <table class="table">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Tipo</th>
                    <th>CNPJ/CPF</th>
                    <th>Email</th>
                    <th>Telefone</th>
                    <th>Status</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                    {% for cliente in clientes %}
                    <tr>
                        <td>{{ cliente.nome }}</td>
                        <td>{{ cliente.get_tipo_display }}</td>
                        <td>{{ cliente.cnpj_cpf|default:"-" }}</td>
                        <td>{{ cliente.email }}</td>
                        <td>{{ cliente.telefone }}</td>
                        <td>
                            <form method="post" action="{% url 'comercial:toggle_cliente' cliente.id %}" style="display:inline;">
    {% csrf_token %}
    <button type="submit" class="badge bg-{% if cliente.ativo %}success{% else %}danger{% endif %} border-0" style="cursor:pointer;">
        {% if cliente.ativo %}Ativo{% else %}Inativo{% endif %}
    </button>
</form>
                        </td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <a href="{% url 'comercial:editar_cliente' cliente.id %}" class="btn btn-sm btn-warning ms-1" title="Editar">
    <i class="bi bi-pencil"></i>
</a>
<a href="{% url 'comercial:excluir_cliente' cliente.id %}" class="btn btn-sm btn-danger ms-1" title="Excluir">
    <i class="bi bi-trash"></i>
</a>
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="7" class="text-center">Nenhum cliente cadastrado</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
